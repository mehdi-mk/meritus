<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Applications - {{ job_title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    <div class="applications-page-container">
        <div class="applications-page-header">
            <h1>Applications for: {{ job_title }}</h1>
            <button class="btn btn-secondary" onclick="window.close()">Close</button>
        </div>
        <div id="applications-content">
            <p class="loading">Loading applications...</p>
        </div>
    </div>

    <script>
        const jobId = {{ job_id }};

        document.addEventListener('DOMContentLoaded', function() {
            loadJobApplications(jobId);
        });

        async function loadJobApplications(jobId) {
            // Implementation will be added to dashboard.js
            const contentDiv = document.getElementById('applications-content');

            try {
                const response = await fetch(`/api/jobs/${jobId}/applications`);
                if (!response.ok) throw new Error('Failed to load applications');

                const applications = await response.json();

                if (applications.length === 0) {
                    contentDiv.innerHTML = '<div class="empty-list-msg">No applications for this job yet.</div>';
                } else {
                    contentDiv.innerHTML = createApplicationsListHTML(applications, jobId);
                    setupApplicationEventListeners();
                }
            } catch (error) {
                console.error('Error loading applications:', error);
                contentDiv.innerHTML = '<div class="error-msg">Failed to load applications. Please try again.</div>';
            }
        }

        // Include the application management functions from dashboard.js
        // (createApplicationsListHTML, setupApplicationEventListeners, etc.)
    </script>
</body>
</html>